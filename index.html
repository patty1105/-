<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>ç‚¸è£‚é¦–çˆ¾çˆ†ç ´å±€ï½œå‹æƒ…å¤§æ¸¬é©—</title>
  <style>
    :root{
      --bg:#0b0b10;
      --text:#f4f4f7;
      --muted:#a7a7b3;
      --good:#2ecc71;
      --bad:#ff5a5f;
      --accent:#8b5cf6;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius: 16px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, "PingFang TC", "Noto Sans TC", Arial, sans-serif;
      background: radial-gradient(1200px 800px at 20% -10%, rgba(139,92,246,.25), transparent 60%),
                  radial-gradient(900px 700px at 100% 0%, rgba(46,204,113,.12), transparent 55%),
                  var(--bg);
      color:var(--text);
      line-height:1.55;
    }
    .container{ max-width: 920px; margin: 0 auto; padding: 18px 14px 132px; }
    header{ padding: 12px 8px 4px; }
    h1{ margin: 4px 0 6px; font-size: 24px; letter-spacing: .3px; }
    .muted{ color:var(--muted); margin:0 0 10px; font-size: 14px; }
    .tip{
      margin: 10px 0 14px;
      padding: 12px 12px;
      border:1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.04);
      border-radius: var(--radius);
      color: var(--muted);
      font-size: 13px;
    }
    .meta{ display:flex; flex-wrap:wrap; gap:8px; margin: 10px 0 0; }
    .chip{
      font-size: 12px;
      color: rgba(255,255,255,.9);
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.10);
      padding: 6px 10px;
      border-radius: 999px;
    }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border: 1px solid rgba(255,255,255,.08);
      border-radius: var(--radius);
      padding: 14px 14px 10px;
      margin: 12px 0;
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .q-head{ display:flex; align-items:flex-start; justify-content:space-between; gap:10px; margin-bottom: 10px; }
    .q-title{ font-weight: 950; font-size: 16px; margin:0; }
    .pill{
      flex:0 0 auto;
      font-size: 12px;
      color: rgba(255,255,255,.88);
      background: rgba(139,92,246,.22);
      border: 1px solid rgba(139,92,246,.35);
      padding: 4px 10px;
      border-radius: 999px;
      white-space: nowrap;
    }
    .subpill{
      display:inline-block;
      margin-top: 8px;
      font-size: 12px;
      color: rgba(255,255,255,.78);
      background: rgba(255,255,255,.05);
      border: 1px solid rgba(255,255,255,.10);
      padding: 3px 10px;
      border-radius: 999px;
    }

    .opt{
      display:flex; align-items:flex-start; gap:10px;
      padding: 12px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.03);
      margin: 10px 0;
      cursor:pointer;
      user-select:none;
      transition: transform .05s ease, background .15s ease, border-color .15s ease;
    }
    .opt:active{ transform: scale(.99); }
    .opt:hover{ background: rgba(255,255,255,.05); }
    .opt input{ margin-top: 2px; transform: scale(1.15); }
    .opt-text{ flex:1; font-size: 15px; }

    .status{
      margin-top: 10px;
      padding: 10px 12px;
      border-radius: 14px;
      background: rgba(255,255,255,.03);
      border: 1px dashed rgba(255,255,255,.14);
      display:none;
      font-size: 14px;
      color: var(--muted);
    }
    .status strong{ color: var(--text); }
    .status .tag{
      display:inline-block;
      margin-left: 8px;
      padding: 2px 10px;
      border-radius: 999px;
      font-size: 12px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      color: rgba(255,255,255,.85);
    }
    .tag.good{ border-color: rgba(46,204,113,.45); background: rgba(46,204,113,.14); }
    .tag.bad{ border-color: rgba(255,90,95,.45); background: rgba(255,90,95,.14); }

    .card.correct{ border-color: rgba(46,204,113,.35); background: linear-gradient(180deg, rgba(46,204,113,.12), rgba(255,255,255,.03)); }
    .card.wrong{ border-color: rgba(255,90,95,.35); background: linear-gradient(180deg, rgba(255,90,95,.10), rgba(255,255,255,.03)); }
    .opt.correctAns{ border-color: rgba(46,204,113,.55); background: rgba(46,204,113,.14); }
    .opt.chosenWrong{ border-color: rgba(255,90,95,.55); background: rgba(255,90,95,.14); }

    .result{
      margin-top: 14px;
      padding: 14px 14px;
      border-radius: var(--radius);
      border:1px solid rgba(255,255,255,.10);
      background: linear-gradient(180deg, rgba(139,92,246,.16), rgba(255,255,255,.03));
      box-shadow: var(--shadow);
      display:none;
    }
    .score{ font-size: 22px; font-weight: 950; margin: 0 0 6px; }
    .titleline{ margin: 10px 0 6px; font-weight: 950; font-size: 18px; }
    .comment{ margin: 0; color: rgba(255,255,255,.92); }
    .mini{ margin-top:10px; color: var(--muted); font-size: 13px; }

    .warn{
      color: #ffd6d8;
      background: rgba(255,90,95,.12);
      border:1px solid rgba(255,90,95,.25);
      padding: 10px 12px;
      border-radius: 14px;
      margin: 10px 0 0;
      display:none;
      font-weight: 900;
    }

    .dock{
      position: fixed; left: 0; right: 0; bottom: 0;
      padding: 10px 12px calc(10px + env(safe-area-inset-bottom));
      background: rgba(10,10,16,.88);
      backdrop-filter: blur(10px);
      border-top: 1px solid rgba(255,255,255,.08);
      z-index: 10;
    }
    .dock-inner{
      max-width: 920px;
      margin: 0 auto;
      display:flex;
      gap:10px;
      align-items:center;
      justify-content: space-between;
    }
    .btn{
      flex:1;
      border:0;
      border-radius: 14px;
      padding: 12px 14px;
      font-size: 15px;
      font-weight: 900;
      cursor:pointer;
      color: var(--text);
      background: rgba(255,255,255,.10);
      border: 1px solid rgba(255,255,255,.12);
    }
    .btn.primary{
      background: linear-gradient(180deg, rgba(139,92,246,.9), rgba(139,92,246,.65));
      border-color: rgba(139,92,246,.55);
    }
    .btn:disabled{ opacity: .55; cursor:not-allowed; }
    .btn.small{ flex:0 0 auto; width: 110px; }
    @media (min-width: 700px){
      h1{ font-size: 28px; }
      .q-title{ font-size: 17px; }
      .opt-text{ font-size: 16px; }
      .btn.small{ width: 140px; }
    }
  </style>
</head>

<body>
  <div class="container">
    <header>
      <h1>ğŸ’¥ ç‚¸è£‚é¦–çˆ¾çˆ†ç ´å±€ï½œå‹æƒ…å¤§æ¸¬é©—ï¼ˆå…«å¦åŠ å¼·ç‰ˆï¼‰</h1>
      <p class="muted">æäº¤å¾Œæœƒé¡¯ç¤ºæ¯é¡Œã€Œä½ é¸çš„ã€èˆ‡ã€Œæ­£ç¢ºç­”æ¡ˆã€ï¼Œä¸¦çµ¦ä½ ä¸€å€‹å°ˆå±¬ç¨±è™Ÿï¼‹ä½ æœ€å¼·çš„å…«å¦é¡å‹ã€‚</p>
      <div class="tip">
        è¦å‰‡ï¼šä¸å‡†ç¿»ç¾¤ã€ä¸å‡†å•äººã€ä¸å‡†äº‹å¾Œçˆ†ç ´ã€‚<br>
        æç¤ºï¼šé¡Œç›®åå…§æ¢—ï¼Œç­”å°å¾ˆå¯ç–‘ï¼ˆå°¤å…¶æ˜¯å®˜ç¶²çœ 2 å…ƒé‚£é¡Œï¼‰ã€‚
      </div>
      <div class="meta">
        <span class="chip" id="chipCount">é¡Œæ•¸ï¼šâ€”</span>
        <span class="chip">è¨ˆåˆ†ï¼šæ¯é¡Œ 1 åˆ†</span>
        <span class="chip">çµæœï¼šåˆ†æ•¸ï¼‹ç¨±è™Ÿï¼‹é¡å‹åˆ†æ</span>
      </div>
    </header>

    <div id="quiz"></div>

    <div id="result" class="result"></div>
    <div id="warn" class="warn"></div>
  </div>

  <div class="dock">
    <div class="dock-inner">
      <button class="btn primary" id="submitBtn">æäº¤ç®—åˆ†</button>
      <button class="btn" id="shareBtn" disabled>åˆ†äº«çµæœ</button>
      <button class="btn small" id="resetBtn">é‡è¨­</button>
    </div>
  </div>

  <script>
    // category ç”¨ä¾†åšç¨±è™Ÿï¼šçœ‹ä½ æœ€å¼·/æœ€å¼±æ˜¯å“ªç¨®ã€Œç¾¤çµ„æŠ€èƒ½ã€
    const quizData = [
      // â€”â€” è¡Œç¨‹ï¼ç¾¤çµ„æ—¥å¸¸ â€”â€”
      { title:"1ï¸âƒ£ é€™å€‹ç¾¤çµ„ä¸€é–‹å§‹æœ€åƒåœ¨åšä»€éº¼ï¼Ÿ",
        options:["ä¸€æ¬¡å°±æ±ºå®šå¥½è¡Œç¨‹","è¨è«–å¾ˆä¹…ä½†æ°¸é å·®ä¸€æ­¥","åªåˆ†äº«è²¼åœ–","åªåœ¨çˆ†ç ´"],
        correctIndex:1, category:"æ±ºç­–" },

      { title:"2ï¸âƒ£ ã€Œç‚¸è£‚é¦–çˆ¾çˆ†ç ´å±€ã€é€™åå­—æœ€è²¼è¿‘çš„åŸå› ï¼Ÿ",
        options:["å¤§å®¶å¾ˆå†·éœ","è¡Œç¨‹èˆ‡åƒ¹æ ¼æ¯å¤©éƒ½åœ¨çˆ†","åªæ˜¯è¦ºå¾—å¯æ„›","æœ‰äººæ‰‹æ»‘æ”¹å"],
        correctIndex:1, category:"å…«å¦" },

      { title:"3ï¸âƒ£ ç¾¤çµ„æœ€å¸¸è¦‹çš„é—œéµå­—æ˜¯å“ªå¥ï¼Ÿ",
        options:["é‚£å°±é€™æ¨£å®šå›‰","æˆ‘éƒ½å¯ä»¥","å¤§å®¶ç†æ€§ä¸€é»","æ˜å¤©å†èªª"],
        correctIndex:1, category:"äººç‰©" },

      { title:"4ï¸âƒ£ æœ€å¸¸å°è‡´ã€Œä»Šå¤©åˆæ²’çµè«–ã€çš„ç‹€æ³ï¼Ÿ",
        options:["æœ‰äººé–‹å§‹ç®—éŒ¢","æœ‰äººçªç„¶æ¶ˆå¤±","æœ‰äººæ”¹å£","ä»¥ä¸Šçš†æ˜¯"],
        correctIndex:3, category:"æ±ºç­–" },

      // â€”â€” æ©Ÿç¥¨åœ°ç„ï¼ˆç´°ç¯€å‹ï¼‰â€”â€”
      { title:"5ï¸âƒ£ çœ‹æ©Ÿç¥¨æ™‚æœ€å®¹æ˜“å‡ºç¾çš„æƒ…ç·’çµ„åˆæ˜¯ï¼Ÿ",
        options:["å†·éœï¼‹ç†æ€§","æœŸå¾…ï¼‹å¹¸ç¦","ç„¦æ…®ï¼‹ä¸ç”˜å¿ƒ","æ¯«ç„¡æ³¢ç€¾"],
        correctIndex:2, category:"æƒ…ç·’" },

      { title:"6ï¸âƒ£ èª°è¢«èªªã€Œä½ å¾ˆå‹‡ã€ï¼Ÿï¼ˆå› ç‚ºä¸‹å–®å¤ªå¿«ï¼‰",
        options:["æ—ç®çŸ","èŒƒè¾°äº","åº­èª","å§µè“"],
        correctIndex:1, category:"æ©Ÿç¥¨" },

      { title:"7ï¸âƒ£ ã€Œå¹¹ä»–ä¸è®“æˆ‘æŒ‰ã€é€™å¥æ˜¯åœ¨èªªä»€éº¼ï¼Ÿ",
        options:["å®˜ç¶²ç•¶æ©Ÿ","ä»˜æ¬¾å¡ä½","è¨‚ä½æŒ‰éˆ•æŒ‰ä¸äº†","é¸åº§ä½ä¸èƒ½æŒ‰"],
        correctIndex:2, category:"æ©Ÿç¥¨" },

      { title:"8ï¸âƒ£ èª°èªªéã€Œæ¬¸å¯ä»¥é¸åº§ä½æ¬¸ã€ä½†ä¸‹ä¸€ç§’ç™¼ç¾è¦åŠ éŒ¢ï¼Ÿ",
        options:["å“å®¸","åº­èª","èŒƒè¾°äº","æ—ç®çŸ"],
        correctIndex:0, category:"æ©Ÿç¥¨" },

      { title:"9ï¸âƒ£ çœ‹èµ·ä¾†æœ€ã€Œçœåˆ°æ¥µè‡´ã€çš„ä¸€å¥è©±æ˜¯ï¼Ÿ",
        options:["å®˜ç¶²ä¾¿å®œå…©å¡ŠéŒ¢å“ˆå“ˆå“ˆå“ˆ","å·®å¹¾ç™¾æ²’å·®å•¦","æˆ‘å€‘å¤œå®¿è¡—é ­","ç”¨çœ¼ç›é€›"],
        correctIndex:0, category:"æ©Ÿç¥¨" },

      { title:"ğŸ”Ÿ ã€Œè¯èˆªå®˜ç¶² 8521ã€æ˜¯èª°è¬›çš„ï¼Ÿ",
        options:["æ—ç®çŸ","èŒƒè¾°äº","å“å®¸","åº­èª"],
        correctIndex:1, category:"æ©Ÿç¥¨" },

      { title:"1ï¸âƒ£1ï¸âƒ£ èª°èªªã€Œæˆ‘æœ‰é‡Œç¨‹å¯ä»¥æŠµã€ï¼Ÿ",
        options:["å“å®¸","åº­èª","æ—ç®çŸ","å§µè“"],
        correctIndex:0, category:"æ©Ÿç¥¨" },

      { title:"1ï¸âƒ£2ï¸âƒ£ èª°èªªã€Œæˆ‘åœ¨ç ”ç©¶å®˜ç¶²æ€éº¼è¨‚ã€ï¼Ÿ",
        options:["å§µè“","åº­èª","èŒƒè¾°äº","å“å®¸"],
        correctIndex:0, category:"æ©Ÿç¥¨" },

      { title:"1ï¸âƒ£3ï¸âƒ£ æœ‰äººçœ‹éŒ¯æ©Ÿç¥¨åŸå¸‚ï¼Œèª¤ä»¥ç‚ºåœ¨çœ‹å“ªè£¡ï¼Ÿ",
        options:["æ±äº¬","ç¦å²¡","å¤§é˜ª","é‡œå±±"],
        correctIndex:2, category:"æ©Ÿç¥¨" },

      { title:"1ï¸âƒ£4ï¸âƒ£ ã€Œtrip.comã€åœ¨ç¾¤çµ„ä¸­è¢«æåˆ°çš„ç”¨é€”æ˜¯ï¼Ÿ",
        options:["è¨‚é£¯åº—","çœ‹æ™¯é»","è²·æ©Ÿç¥¨å¯èƒ½æ¯”è¼ƒä¾¿å®œ","è²·ä¿éšª"],
        correctIndex:2, category:"æ©Ÿç¥¨" },

      { title:"1ï¸âƒ£5ï¸âƒ£ ã€Œè¨±éœ†èˆ‡æ€éº¼å¾ˆå®‰éœã€é€™å¥æ˜¯èª°ç™¼çš„ï¼Ÿ",
        options:["å“å®¸","èŒƒè¾°äº","åº­èª","å§µè“"],
        correctIndex:0, category:"äººç‰©" },

      { title:"1ï¸âƒ£6ï¸âƒ£ è¢« @ ä¹‹å¾Œå›ã€Œå¹¹æˆ‘å‰›è«®å•†å®Œã€çš„æ˜¯èª°ï¼Ÿ",
        options:["åº­èª","èŒƒè¾°äº","æ—ç®çŸ","å§µè“"],
        correctIndex:0, category:"äººç‰©" },

      { title:"1ï¸âƒ£7ï¸âƒ£ ã€Œä¸è¦çˆ†ç ´æˆ‘ã€æ˜¯èª°è¬›çš„ï¼Ÿ",
        options:["åº­èª","å“å®¸","æ—ç®çŸ","èŒƒè¾°äº"],
        correctIndex:0, category:"å…«å¦" },

      // â€”â€” ä½å®¿æ¯”åƒ¹åœ°ç„ â€”â€”
      { title:"1ï¸âƒ£8ï¸âƒ£ ã€Œæˆ‘æ˜¯ booking.com ç‰ˆæœ¬çš„æ—ä½©é›¯çš„ agodaã€æ˜¯èª°è‡ªå˜²çš„ï¼Ÿ",
        options:["å“å®¸","èŒƒè¾°äº","å§µè“","åº­èª"],
        correctIndex:1, category:"ä½å®¿" },

      { title:"1ï¸âƒ£9ï¸âƒ£ ã€Œåœ‹æ—…åœ¨æã€æ˜¯èª°èªªçš„ï¼Ÿ",
        options:["æ—ç®çŸ","èŒƒè¾°äº","åº­èª","åŠ‰çˆå½¤"],
        correctIndex:0, category:"ä½å®¿" },

      { title:"2ï¸âƒ£0ï¸âƒ£ ã€ŒæŠ•å½±æ©Ÿå¥½è®šã€é€™å¥æ˜¯èª°èªªçš„ï¼Ÿ",
        options:["åº­èª","æ—ç®çŸ","å§µè“","å“å®¸"],
        correctIndex:0, category:"ä½å®¿" },

      { title:"2ï¸âƒ£1ï¸âƒ£ æœ‰äººçœ‹åˆ°åƒ¹æ ¼ã€Œ7287ã€åš‡åˆ°ï¼Œç¬¬ä¸€åæ‡‰æ˜¯ï¼Ÿ",
        options:["é€™æ˜¯ä¸€äººä¸€æ™šå—","å¥½ä¾¿å®œ","å¿«è¨‚","æ˜¯è©é¨™å—"],
        correctIndex:0, category:"ä½å®¿" },

      { title:"2ï¸âƒ£2ï¸âƒ£ èª°èªªé‚£å€‹æ€ªåƒ¹æ ¼ã€Œå¯èƒ½æ˜¯é’æ—…ã€ï¼Ÿ",
        options:["æ—ç®çŸ","åº­èª","èŒƒè¾°äº","å§µè“"],
        correctIndex:0, category:"ä½å®¿" },

      { title:"2ï¸âƒ£3ï¸âƒ£ ã€Œæˆ‘ä¹‹å‰éƒ½éš¨ä¾¿ä½ 2.300 çš„é’æ—…ã€æ˜¯èª°èªªçš„ï¼Ÿ",
        options:["æ—ç®çŸ","èŒƒè¾°äº","åº­èª","å§µè“"],
        correctIndex:0, category:"ä½å®¿" },

      { title:"2ï¸âƒ£4ï¸âƒ£ ã€Œæˆ‘å€‘çªç„¶ä¸€èµ·è¨‚ç„¶å¾Œæˆ‘ agoda åƒ¹éŒ¢å°±é£†ä¸Šä¾†äº†ã€æ˜¯èª°è¬›çš„ï¼Ÿ",
        options:["æ—ç®çŸ","èŒƒè¾°äº","å“å®¸","åº­èª"],
        correctIndex:0, category:"ä½å®¿" },

      // â€”â€” æ±—è’¸å¹•/LOL/åƒå–ç©æ¨‚ï¼ˆå…«å¦å€ï¼‰â€”â€”
      { title:"2ï¸âƒ£5ï¸âƒ£ èª°å…ˆèªªã€Œæˆ‘è¦æ±—è’¸å¹•ã€ï¼Ÿ",
        options:["åº­èª","å§µè“","èŒƒè¾°äº","æ—ç®çŸ"],
        correctIndex:0, category:"è¡Œç¨‹" },

      { title:"2ï¸âƒ£6ï¸âƒ£ ã€Œæˆ‘å€‘è¦å¸¶é ­å·¾æ‹ reelsã€æ˜¯èª°æçš„ï¼Ÿ",
        options:["åº­èª","æ—ç®çŸ","å§µè“","å“å®¸"],
        correctIndex:0, category:"è¡Œç¨‹" },

      { title:"2ï¸âƒ£7ï¸âƒ£ ã€Œæˆ‘è¦æ‹¿é›è›‹æ‰“åˆ¥äººã€æ˜¯èª°è¬›çš„ï¼Ÿ",
        options:["å§µè“","åº­èª","èŒƒè¾°äº","å“å®¸"],
        correctIndex:0, category:"å…«å¦" },

      { title:"2ï¸âƒ£8ï¸âƒ£ ã€ŒLOL Parkã€è¢«èª°æå‡ºå¾Œï¼Œå¤§å®¶ä¸€åº¦ä»¥ç‚ºæ˜¯éŠæ¨‚åœ’ï¼Ÿ",
        options:["å§µè“æã€æ—ç®çŸèª¤æœƒ","å“å®¸æã€èŒƒè¾°äºèª¤æœƒ","åº­èªæã€æ—ç®çŸèª¤æœƒ","èŒƒè¾°äºæã€å§µè“èª¤æœƒ"],
        correctIndex:0, category:"å…«å¦" },

      { title:"2ï¸âƒ£9ï¸âƒ£ èª°èªªã€Œæˆ‘è¦å»åƒéƒ¨éšŠé‹ï¼Œå†·å†·çš„å¤©å¾ˆé©åˆã€ï¼Ÿ",
        options:["èŒƒè¾°äº","åº­èª","æ—ç®çŸ","å§µè“"],
        correctIndex:0, category:"è¡Œç¨‹" },

      // â€”â€” æ—©æ“èˆï¼‹å–é…’ï¼‹é€›è¡—ï¼ˆè¶…å…§æ¢—ï¼‰â€”â€”
      { title:"3ï¸âƒ£0ï¸âƒ£ çœ‹åˆ°ã€Œé€™æ˜¯æ—©æ“è«‹åƒè€ƒã€å¾Œï¼Œèª°èªªã€Œæˆ‘è¦é€€å‡ºã€ï¼Ÿ",
        options:["åŠ‰çˆå½¤","å§µè“","å“å®¸","åº­èª"],
        correctIndex:0, category:"èˆè¹ˆ" },

      { title:"3ï¸âƒ£1ï¸âƒ£ ç¾¤çµ„æ±ºå®šè¦åœ¨å“ªè£¡è·³é‚£å€‹ã€Œæ—©æ“ã€ï¼Ÿ",
        options:["é£¯åº—è·Ÿæ±—è’¸å¹•","æ©Ÿå ´è·Ÿé£¯åº—","åœ°éµç«™è·Ÿä¾¿åˆ©å•†åº—","LOL Park è£¡é¢"],
        correctIndex:0, category:"èˆè¹ˆ" },

      { title:"3ï¸âƒ£2ï¸âƒ£ ã€Œæˆ‘è·Ÿé£¯æ²‰é­š ç¬‘æ­»ã€æ˜¯åœ¨ç´„ä»€éº¼ï¼Ÿ",
        options:["å–é…’","è²·æ©Ÿç¥¨","è¨‚é£¯åº—","è²·ä¿éšª"],
        correctIndex:0, category:"é…’ç²¾" },
    ];

    const quizEl = document.getElementById("quiz");
    const resultEl = document.getElementById("result");
    const warnEl = document.getElementById("warn");
    const shareBtn = document.getElementById("shareBtn");

    let lastScore = null;
    let lastTitle = "";
    let lastComment = "";

    document.getElementById("chipCount").textContent = `é¡Œæ•¸ï¼š${quizData.length}`;

    function renderQuiz(){
      quizEl.innerHTML = "";
      quizData.forEach((q, idx) => {
        const card = document.createElement("section");
        card.className = "card";
        card.dataset.qindex = idx;

        const head = document.createElement("div");
        head.className = "q-head";

        const title = document.createElement("p");
        title.className = "q-title";
        title.textContent = q.title;

        const right = document.createElement("div");
        const pill = document.createElement("div");
        pill.className = "pill";
        pill.textContent = "å–®é¸ï½œ1 åˆ†";
        right.appendChild(pill);

        const sub = document.createElement("div");
        sub.className = "subpill";
        sub.textContent = `é¡å‹ï¼š${q.category}`;
        right.appendChild(sub);

        head.appendChild(title);
        head.appendChild(right);
        card.appendChild(head);

        q.options.forEach((opt, oIdx) => {
          const id = `q${idx}_o${oIdx}`;
          const label = document.createElement("label");
          label.className = "opt";
          label.setAttribute("for", id);

          const input = document.createElement("input");
          input.type = "radio";
          input.name = `q${idx}`;
          input.id = id;
          input.value = String(oIdx);

          const text = document.createElement("div");
          text.className = "opt-text";
          text.textContent = opt;

          label.appendChild(input);
          label.appendChild(text);
          card.appendChild(label);
        });

        const status = document.createElement("div");
        status.className = "status";
        status.id = `status_${idx}`;
        card.appendChild(status);

        quizEl.appendChild(card);
      });
    }

    function clearMarks(){
      document.querySelectorAll(".card").forEach(c => c.classList.remove("correct","wrong"));
      document.querySelectorAll(".opt").forEach(o => o.classList.remove("correctAns","chosenWrong"));
      document.querySelectorAll(".status").forEach(s => { s.style.display="none"; s.innerHTML=""; });
      warnEl.style.display = "none";
      warnEl.textContent = "";
      resultEl.style.display = "none";
      resultEl.innerHTML = "";
      shareBtn.disabled = true;
      lastScore = null;
      lastTitle = "";
      lastComment = "";
    }

    function getTierComment(score){
      const n = quizData.length;
      const pct = score / n;
      if (pct >= 0.88) return "ä½ ä¸æ˜¯è¨˜å¾—ï¼Œä½ æ˜¯åƒèˆ‡è€…ï¼›ä½ é€£å¤§å®¶çœ 2 å…ƒéƒ½èƒŒå¾—å‡ºä¾†ã€‚";
      if (pct >= 0.72) return "ç©©å®šè¼¸å‡ºå‹å‹æƒ…ï¼šä½ å¯èƒ½æ½›æ°´ï¼Œä½†ä½ éƒ½æ‡‚ï¼Œé‚„çŸ¥é“ä»€éº¼æ™‚å€™è©²é–‰å˜´ã€‚";
      if (pct >= 0.50) return "å‹æƒ…æ—è§€è€…ï¼šæ¢—æ‡‚ä¸€åŠï¼Œç´°ç¯€é çŒœï¼›ä½†ä½ ç¬‘é»å¾ˆæº–ã€‚";
      return "ä½ æ˜¯ä¸æ˜¯æŠŠç¾¤çµ„éœéŸ³ï¼Ÿæˆ–ä½ åªè² è²¬å·²è®€ã€‚";
    }

    function pickTopKey(map){
      let bestKey = null, bestVal = -Infinity;
      for (const [k,v] of Object.entries(map)){
        if (v > bestVal){ bestVal = v; bestKey = k; }
      }
      return bestKey;
    }

    function buildPersonalTitle(score, catCorrect, catTotal){
      // æœ€å¼·é¡å‹ï¼šæ­£ç¢ºç‡æœ€é«˜ï¼ˆè‡³å°‘2é¡Œï¼‰
      const rates = {};
      for (const cat of Object.keys(catTotal)){
        const t = catTotal[cat] || 0;
        const c = catCorrect[cat] || 0;
        if (t >= 2) rates[cat] = c / t;
      }
      const strongest = Object.keys(rates).length ? pickTopKey(rates) : pickTopKey(catCorrect);

      // æœ€å¼±é¡å‹ï¼šæ­£ç¢ºç‡æœ€ä½ï¼ˆè‡³å°‘2é¡Œï¼‰
      let weakest = null;
      if (Object.keys(rates).length){
        let worstVal = Infinity;
        for (const [k,v] of Object.entries(rates)){
          if (v < worstVal){ worstVal = v; weakest = k; }
        }
      }

      // ä¸»ç¨±è™Ÿï¼ˆåˆ†æ•¸ï¼‰
      const pct = score / quizData.length;
      let main = "";
      if (pct >= 0.90) main = "ğŸ’ çˆ†ç ´å±€æ ¸å¿ƒè‘£äº‹";
      else if (pct >= 0.78) main = "ğŸ”¥ æ ¸å¿ƒçˆ†ç ´æˆå“¡";
      else if (pct >= 0.62) main = "ğŸ«§ ç©©å®šåœ¨ç·šè§€å¯Ÿå“¡";
      else if (pct >= 0.48) main = "ğŸ‘€ å‹æƒ…æ—è§€äººé¡";
      else main = "ğŸ”• éœéŸ³æ½›æ°´å‚³èªª";

      // é¡å‹å¾Œç¶´
      const suffixMap = {
        "æ©Ÿç¥¨": "ï½œå®˜ç¶²çœ 2 å…ƒæ´¾",
        "ä½å®¿": "ï½œé’æ—…å…¬å¯“ç¯©é¸å™¨",
        "é…’ç²¾": "ï½œç´„å–ä½†äººä¸åœ¨çš„äºº",
        "èˆè¹ˆ": "ï½œæ±—è’¸å¹•æ—©æ“é ˜èˆ",
        "è¡Œç¨‹": "ï½œéƒ¨éšŠé‹é›·é”",
        "æƒ…ç·’": "ï½œç„¦æ…®åŒæ­¥å™¨",
        "æ±ºç­–": "ï½œæ‹–å»¶æ±ºç­–ç‹",
        "äººç‰©": "ï½œé»åè¸¹å…±å°ˆå“¡",
        "å…«å¦": "ï½œå…§æ¢—æ¡é›†å“¡",
      };
      const strongSuffix = suffixMap[strongest] || "ï½œå…§å»ºçˆ†ç ´åŠ›";
      const weakHint = weakest ? `ï¼ˆä½†ä½ åœ¨ã€Œ${weakest}ã€å®¹æ˜“å¤±æ‰‹ï¼‰` : "";

      return { title: `${main} ${strongSuffix}`, strongest, weakest, weakHint };
    }

    function grade(){
      clearMarks();

      const unanswered = [];
      quizData.forEach((q, idx) => {
        const checked = document.querySelector(`input[name="q${idx}"]:checked`);
        if (!checked) unanswered.push(idx + 1);
      });

      if (unanswered.length){
        warnEl.style.display = "block";
        warnEl.textContent = `ä½ é‚„æ²’ç­”å®Œï¼šç¬¬ ${unanswered.join(", ")} é¡Œï¼ˆæ¯é¡Œéƒ½è¦å‹¾é¸æ‰æœƒç®—åˆ†ï¼‰`;
        warnEl.scrollIntoView({ behavior: "smooth", block:"start" });
        return;
      }

      let score = 0;
      const catTotal = {};
      const catCorrect = {};
      quizData.forEach(q => { catTotal[q.category] = (catTotal[q.category] || 0) + 1; });

      quizData.forEach((q, idx) => {
        const checked = document.querySelector(`input[name="q${idx}"]:checked`);
        const chosen = Number(checked.value);

        const card = document.querySelector(`.card[data-qindex="${idx}"]`);
        const status = document.getElementById(`status_${idx}`);

        // æ¨™è¨˜æ­£ç¢ºç­”æ¡ˆ
        const correctId = `q${idx}_o${q.correctIndex}`;
        const correctLabel = document.querySelector(`label[for="${correctId}"]`);
        correctLabel.classList.add("correctAns");

        if (chosen === q.correctIndex){
          score += 1;
          catCorrect[q.category] = (catCorrect[q.category] || 0) + 1;
          card.classList.add("correct");
          status.style.display = "block";
          status.innerHTML = `âœ… ä½ ç­”å°äº† <span class="tag good">+1</span><br>
            <strong>æ­£ç¢ºç­”æ¡ˆï¼š</strong>${q.options[q.correctIndex]}`;
        } else {
          card.classList.add("wrong");
          const chosenId = `q${idx}_o${chosen}`;
          const chosenLabel = document.querySelector(`label[for="${chosenId}"]`);
          chosenLabel.classList.add("chosenWrong");
          status.style.display = "block";
          status.innerHTML = `âŒ ä½ ç­”éŒ¯äº† <span class="tag bad">+0</span><br>
            <strong>ä½ é¸çš„ï¼š</strong>${q.options[chosen]}<br>
            <strong>æ­£ç¢ºç­”æ¡ˆï¼š</strong>${q.options[q.correctIndex]}`;
        }
      });

      const tierComment = getTierComment(score);
      const { title, strongest, weakest, weakHint } = buildPersonalTitle(score, catCorrect, catTotal);

      const distLines = Object.keys(catTotal).map(cat => {
        const c = catCorrect[cat] || 0;
        const t = catTotal[cat] || 0;
        const pct = Math.round((c/t)*100);
        return `â€¢ ${cat}ï¼š${c}/${t}ï¼ˆ${pct}%ï¼‰`;
      }).join("<br>");

      lastScore = score;
      lastTitle = title;
      lastComment = tierComment;

      resultEl.style.display = "block";
      resultEl.innerHTML = `
        <div class="score">ä½ çš„åˆ†æ•¸ï¼š${score} / ${quizData.length}</div>
        <div class="titleline">ä½ çš„ç¨±è™Ÿï¼š${title}</div>
        <p class="comment">${tierComment}</p>
        <p class="mini" style="margin-top:10px;">
          ä½ æœ€å¼·çš„é¡å‹ï¼š<b>${strongest || "ï¼ˆç„¡ï¼‰"}</b> ${weakHint}
        </p>
        <div class="mini" style="margin-top:10px; line-height:1.6;">
          <b>é¡å‹å‘½ä¸­ç‡</b><br>${distLines}
        </div>
        <p class="mini" style="margin-top:10px;">å·²é¡¯ç¤ºæ¯é¡Œã€Œä½ é¸çš„ã€èˆ‡ã€Œæ­£ç¢ºç­”æ¡ˆã€ã€‚</p>
      `;
      resultEl.scrollIntoView({ behavior: "smooth", block:"start" });
      shareBtn.disabled = false;
    }

    async function shareResult(){
      if (lastScore === null) return;
      const text =
`ğŸ’¥ç‚¸è£‚é¦–çˆ¾çˆ†ç ´å±€å‹æƒ…å¤§æ¸¬é©—ï¼ˆå…«å¦åŠ å¼·ç‰ˆï¼‰ğŸ’¥
åˆ†æ•¸ï¼š${lastScore}/${quizData.length}
ç¨±è™Ÿï¼š${lastTitle}
è©•èªï¼š${lastComment}
ï¼ˆä¸å‡†ç¿»ç¾¤ã€ä¸å‡†äº‹å¾Œçˆ†ç ´ï¼‰`;

      if (navigator.share){
        try{ await navigator.share({ title: "å‹æƒ…å¤§æ¸¬é©—æˆç¸¾", text }); return; }
        catch(_) {}
      }
      try{
        await navigator.clipboard.writeText(text);
        const btn = document.getElementById("shareBtn");
        btn.textContent = "å·²è¤‡è£½ï¼";
        setTimeout(()=> btn.textContent = "åˆ†äº«çµæœ", 1200);
      }catch(e){
        alert("æ­¤ç€è¦½å™¨ä¸æ”¯æ´è‡ªå‹•åˆ†äº«/è¤‡è£½ï¼Œè«‹æ‰‹å‹•è¤‡è£½ï¼š\n\n" + text);
      }
    }

    function resetAll(){
      document.querySelectorAll('input[type="radio"]').forEach(i => i.checked = false);
      clearMarks();
      window.scrollTo({ top:0, behavior:"smooth" });
    }

    document.getElementById("submitBtn").addEventListener("click", grade);
    document.getElementById("resetBtn").addEventListener("click", resetAll);
    document.getElementById("shareBtn").addEventListener("click", shareResult);

    renderQuiz();
  </script>
</body>
</html>
